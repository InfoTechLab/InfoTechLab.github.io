!function(){[Element,Window,Document].invoke("implement",{hasEvent:function(t){var e=this.retrieve("events"),i=e&&e[t]?e[t].values:null;if(i)for(var r=i.length;r--;)if(r in i)return!0;return!1}});var t=function(t,e,i,r){return e=t[e],i=t[i],function(t,n){n||(n=r),i&&!this.hasEvent(n)&&i.call(this,t,n),e&&e.call(this,t,n)}},e=function(t,e,i,r){return function(n,s){e[i].call(this,n,s||r),t[i].call(this,n,s||r)}},i=Element.Events;Element.defineCustomEvent=function(r,n){var s=i[n.base];return n.onAdd=t(n,"onAdd","onSetup",r),n.onRemove=t(n,"onRemove","onTeardown",r),i[r]=s?Object.append({},n,{base:s.base,condition:function(t){return!(s.condition&&!s.condition.call(this,t)||n.condition&&!n.condition.call(this,t))},onAdd:e(n,s,"onAdd",r),onRemove:e(n,s,"onRemove",r)}):n,this};var r=function(t){var e="on"+t.capitalize();return Element[t+"CustomEvents"]=function(){Object.each(i,function(t,i){t[e]&&t[e].call(t,i)})},r};r("enable")("disable")}(),function(){if(Browser.Device={name:"other"},Browser.Platform.ios){var t=navigator.userAgent.toLowerCase().match(/(ip(ad|od|hone))/)[0];Browser.Device[t]=!0,Browser.Device.name=t}2==this.devicePixelRatio&&(Browser.hasHighResolution=!0),Browser.isMobile=!["mac","linux","win"].contains(Browser.Platform.name)}.call(this),Browser.Features.Touch=function(){try{return document.createEvent("TouchEvent").initTouchEvent("touchstart"),!0}catch(t){}return!1}(),Browser.Features.iOSTouch=function(){var t="cantouch",e=document.html,i=!1;if(!e.addEventListener)return!1;var r=function(){e.removeEventListener(t,r,!0),i=!0};try{e.addEventListener(t,r,!0);var n=document.createEvent("TouchEvent");return n.initTouchEvent(t),e.dispatchEvent(n),i}catch(s){}return r(),!1}(),function(){var e,t=function(t){t.target&&"select"==t.target.tagName.toLowerCase()||t.preventDefault()};Element.defineCustomEvent("touch",{base:"touchend",condition:function(t){if(e||0!=t.targetTouches.length)return!1;var i=t.changedTouches[0],r=document.elementFromPoint(i.clientX,i.clientY);do if(r==this)return!0;while(r&&(r=r.parentNode));return!1},onSetup:function(){this.addEvent("touchstart",t)},onTeardown:function(){this.removeEvent("touchstart",t)},onEnable:function(){e=!1},onDisable:function(){e=!0}})}(),Browser.Features.iOSTouch&&function(){var t="click";delete Element.NativeEvents[t],Element.defineCustomEvent(t,{base:"touch"})}();