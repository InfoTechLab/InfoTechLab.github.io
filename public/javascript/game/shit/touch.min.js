!function(){[Element,Window,Document].invoke("implement",{hasEvent:function(e){var t=this.retrieve("events"),n=t&&t[e]?t[e].values:null;if(n)for(var o=n.length;o--;)if(o in n)return!0;return!1}});var e=function(e,t,n,o){return t=e[t],n=e[n],function(e,r){r||(r=o),n&&!this.hasEvent(r)&&n.call(this,e,r),t&&t.call(this,e,r)}},t=function(e,t,n,o){return function(r,i){t[n].call(this,r,i||o),e[n].call(this,r,i||o)}},n=Element.Events;Element.defineCustomEvent=function(o,r){var i=n[r.base];return r.onAdd=e(r,"onAdd","onSetup",o),r.onRemove=e(r,"onRemove","onTeardown",o),n[o]=i?Object.append({},r,{base:i.base,condition:function(e){return!(i.condition&&!i.condition.call(this,e)||r.condition&&!r.condition.call(this,e))},onAdd:t(r,i,"onAdd",o),onRemove:t(r,i,"onRemove",o)}):r,this};var o=function(e){var t="on"+e.capitalize();return Element[e+"CustomEvents"]=function(){Object.each(n,function(e,n){e[t]&&e[t].call(e,n)})},o};o("enable")("disable")}(),function(){if(Browser.Device={name:"other"},Browser.Platform.ios){var e=navigator.userAgent.toLowerCase().match(/(ip(ad|od|hone))/)[0];Browser.Device[e]=!0,Browser.Device.name=e}2==this.devicePixelRatio&&(Browser.hasHighResolution=!0),Browser.isMobile=!["mac","linux","win"].contains(Browser.Platform.name)}.call(this),Browser.Features.Touch=function(){try{return document.createEvent("TouchEvent").initTouchEvent("touchstart"),!0}catch(e){}return!1}(),Browser.Features.iOSTouch=function(){var e="cantouch",t=document.html,n=!1;if(!t.addEventListener)return!1;var o=function(){t.removeEventListener(e,o,!0),n=!0};try{t.addEventListener(e,o,!0);var r=document.createEvent("TouchEvent");return r.initTouchEvent(e),t.dispatchEvent(r),n}catch(i){}return o(),!1}(),function(){var t,e=function(e){e.target&&"select"==e.target.tagName.toLowerCase()||e.preventDefault()};Element.defineCustomEvent("touch",{base:"touchend",condition:function(e){if(t||0!=e.targetTouches.length)return!1;var n=e.changedTouches[0],o=document.elementFromPoint(n.clientX,n.clientY);do if(o==this)return!0;while(o&&(o=o.parentNode));return!1},onSetup:function(){this.addEvent("touchstart",e)},onTeardown:function(){this.removeEvent("touchstart",e)},onEnable:function(){t=!1},onDisable:function(){t=!0}})}(),Browser.Features.iOSTouch&&function(){var e="click";delete Element.NativeEvents[e],Element.defineCustomEvent(e,{base:"touch"})}();